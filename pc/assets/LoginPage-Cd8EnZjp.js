import{_ as U}from"./MyButton-NG0OFodt.js";import{_ as B}from"./MyInput-Des6Jksq.js";import{_ as R}from"./MyTab-CvPPF7IE.js";import{_ as A}from"./logo-C9b7ADkL.js";import{l as D,_ as F}from"./user-DVwwJ27s.js";import{o as v,u as M,c as b,r as k,a as J,b as l,d as g,e as s,f as d,t as m,g as I,h as a,i as y,w as C,j as T,k as H}from"./index-sRNqgdFD.js";import{g as _,s as f}from"./utils-BFyP1kS5.js";import{u as K}from"./index-B4oU7Ve4.js";import{u as E}from"./useSocket-R8ozz54L.js";import{L as W}from"./Language-DeJCwiop.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                  */import"./index-CB-azdtK.js";import"./use-form-item-D2xdO-cN.js";import"./index-BLWTovwI.js";import"./dropdown-BVS1iGXQ.js";import"./refs-D66wpJr-.js";const z={class:"c-content login-page relative"},G={class:"top-header"},Q={class:"login-body",style:{}},X={class:"from-box"},Y={class:"login-title"},Z={key:0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ee={key:1,width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},oe={class:"ml-2"},te={__name:"LoginPage",setup(se){const{unConnectHandle:S}=E();v(S);const{t:w}=M(),j=b(()=>[{id:"email",name:w("login.tab2")},{id:"phone",name:w("login.tab1")}]),V=t=>{o.account_type=t},c=T(),i=k(!1),o=J({email:"",phone:"",password:"",account_type:"email",phone_code:"",cf_token:""}),p=k({}),L=b(()=>o.account_type==="email"?!o.email||!o.password:!o.phone||!o.password);function P(t,e=5e3){const u=Date.now(),r=setInterval(()=>{window.jivoWidgetLoaded&&window.jivo_api?(clearInterval(r),t()):Date.now()-u>e&&(clearInterval(r),console.warn("JivoChat API load timeout"))},200)}const h=K(),x=()=>{let t={phone:f(o.phone),email:f(o.email),password:f(o.password)};return i.value?localStorage.setItem("userRemember",JSON.stringify(t)):localStorage.removeItem("userRemember"),o.account_type==="email"&&(o.phone=""),D(o).then(e=>{localStorage.setItem("ws_token",e.ws_token),localStorage.setItem("token",e.token),localStorage.setItem("ws_channel_token",e.ws_channel_token),localStorage.setItem("uid",e.uid),h.setUserInfo({token:e.token,username:o.email}),P(()=>{window.jivo_api.setContactInfo({name:"UID: "+e.uid})}),c.push("/")}).catch(e=>{p.value=e})};v(()=>{if(localStorage.getItem("userRemember")){let t=JSON.parse(localStorage.getItem("userRemember"));o.email=_(t.email),o.password=_(t.password),o.phone=_(t.phone),i.value=!0}localStorage.removeItem("token"),h.setUserInfo({})});const $=t=>{c.push(t)},O=t=>{o.phone_code=t};return(t,e)=>{const u=R,r=B,N=U;return l(),g("div",z,[s("div",G,[d(W)]),s("div",Q,[s("div",X,[s("div",Y,m(t.$t("login.title")),1),d(u,{tabList:j.value,class:"mb-4",tabActive:o.account_type,onTabChange:V},null,8,["tabList","tabActive"]),o.account_type==="phone"?(l(),I(r,{key:0,isIn:"",isLarge:"",modelValue:o.phone,"onUpdate:modelValue":e[0]||(e[0]=n=>o.phone=n),placeholder:t.$t("login.input0"),errorObj:a(p),propName:"phone",isPhone:"",onChangePhoneCode:O},null,8,["modelValue","placeholder","errorObj"])):y("",!0),o.account_type==="email"?(l(),I(r,{key:1,isIn:"",isLarge:"",modelValue:o.email,"onUpdate:modelValue":e[1]||(e[1]=n=>o.email=n),placeholder:t.$t("login.input1"),errorObj:a(p),propName:"email"},null,8,["modelValue","placeholder","errorObj"])):y("",!0),d(r,{isIn:"",isLarge:"",modelValue:o.password,"onUpdate:modelValue":e[3]||(e[3]=n=>o.password=n),placeholder:t.$t("login.input2"),errorObj:a(p),propName:"password",type:"password"},{suffix:C(()=>[s("span",{class:"tip-forget-pwd",onClick:e[2]||(e[2]=n=>a(c).push("/forgetPwd"))},m(t.$t("login.forgetPwd")),1)]),_:1},8,["modelValue","placeholder","errorObj"]),s("div",{class:"remember-pwd",onClick:e[4]||(e[4]=n=>i.value=!a(i))},[a(i)?(l(),g("svg",ee,e[7]||(e[7]=[s("g",{id:"Component 18"},[s("rect",{x:"0.242188",width:"16",height:"16",rx:"4",fill:"#0CAF60"}),s("path",{id:"Vector",d:"M4.5625 8.52609L6.66453 10.6281L11.9196 5.37305",stroke:"#12181F","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))):(l(),g("svg",Z,e[6]||(e[6]=[s("g",{id:"Component 19"},[s("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"3.5",stroke:"currentColor"})],-1)]))),s("span",oe,m(t.$t("login.tip1")),1)]),d(N,{clickFn:x,disabled:L.value},{default:C(()=>[H(m(t.$t("login.button1")),1)]),_:1},8,["disabled"]),s("div",{class:"tip-font mt-10 text-center",onClick:e[5]||(e[5]=n=>$("/Register"))},m(t.$t("login.toRegister")),1)]),e[8]||(e[8]=s("div",{class:"flex-auto flex flex-col justify-center items-center"},[s("div",{class:"flex items-center"},[s("img",{src:A,alt:"",class:"logo"})]),s("img",{src:F,class:"login-bg",alt:""})],-1))])])}}},ke=q(te,[["__scopeId","data-v-d8a31552"]]);export{ke as default};
