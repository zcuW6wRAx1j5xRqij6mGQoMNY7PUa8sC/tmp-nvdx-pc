/* empty css                  */import{v as R}from"./el-loading-DLKkykXM.js";import{_ as Z}from"./MyDialog-D61kNEnW.js";import{_ as J}from"./MyInput-Des6Jksq.js";import{_ as W}from"./MyButton-NG0OFodt.js";import{_ as X}from"./NoData-95ZKbnPO.js";import{_ as Y}from"./MyTab-CvPPF7IE.js";import{c as L,u as ee,r as v,o as te,s as N,h as e,b as c,d as n,e as s,f as b,g as se,i as le,F as f,l as C,t as a,q as S,w as H,k,n as ae,a4 as oe}from"./index-sRNqgdFD.js";import{E as ce,F as ie,G as ne}from"./data-DOzr8Xtg.js";import{f as d,p as re,m as me}from"./utils-BFyP1kS5.js";import{u as ue}from"./useBalance-D7ia67N2.js";import{_ as _e}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                  */import"./index-B4oU7Ve4.js";import"./index-BLWTovwI.js";import"./use-form-item-D2xdO-cN.js";import"./index-CB-azdtK.js";import"./refs-D66wpJr-.js";import"./my-VK3vBoCp.js";const U="data:image/svg+xml,%3csvg%20width='10'%20height='10'%20viewBox='0%200%2010%2010'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Vector'%20d='M9.55482%203.61232C9.47591%203.36397%209.27299%203.18336%209.01933%203.14385L8.24145%203.02532L6.63497%202.74875C6.53914%202.73182%206.45459%202.66973%206.4095%202.57942V2.57378C6.40386%202.5512%206.40386%202.53427%206.39259%202.51169L5.38924%200.389453C5.36106%200.327367%205.3216%200.270924%205.28214%200.22577C5.15249%200.0846638%204.98339%200%204.79738%200C4.54372%200%204.31825%200.146751%204.20551%200.383809L3.07816%202.76568L0.564151%203.14949C0.310495%203.189%200.107571%203.36397%200.0286561%203.61797C-0.0502589%203.87196%200.0173825%204.14288%200.19776%204.3235L2.01844%206.17481L1.59005%208.7881C1.54495%209.04774%201.64641%209.30737%201.85497%209.45977C2.0579%209.61781%202.32846%209.63474%202.5483%209.51057L4.79738%208.27447L7.04645%209.51057C7.14228%209.56701%207.24938%209.58959%207.35084%209.58959C7.48612%209.58959%207.62141%209.54443%207.73978%209.45412C7.9427%209.29608%208.04417%209.04209%208.00471%208.78246L7.57631%206.16917L9.39699%204.31785C9.57174%204.13724%209.63374%203.86631%209.55482%203.61232Z'%20fill='%23FFC148'/%3e%3c/svg%3e",de={class:"flex-auto flex flex-col"},pe={class:"flex-shrink-0"},ve={key:1,class:"ai-ul"},be={class:"flex items-center"},fe={class:"otc-name"},he={class:"text-tip"},ye={class:"flex items-center mt-1"},xe={class:"show-ul is-small"},Ce=["innerHTML"],ke={key:1,class:"show-label"},ge={key:2,class:"ai-ul"},we={class:"flex items-center"},Le={class:"otc-name"},He={class:"flex items-center mt-1"},qe={class:"show-ul is-small"},Te=["innerHTML"],Ve={key:1,class:"show-label"},Se={class:"flex items-center"},Oe={class:"form-label"},De={class:"form-label ml-auto"},je={class:"text-[#fff] c-is-num ml-1"},Me={class:"flex items-center"},Ne={class:"form-label"},Ue={class:"text-[#fff] c-is-num ml-1"},Be={class:"form-label ml-auto"},$e={class:"green-color"},Fe={class:"form-label"},Ie={class:"form-label"},ze={class:"c-card-box"},Ae={class:"flex justify-between mb-4"},Ee={class:""},Ge={class:"form-label"},Ke={class:""},Pe={class:"form-label text-right"},Qe={class:"form-value green-color text-right"},Re={class:"flex justify-between mb-4"},Ze={class:"flex-auto"},Je={class:"form-label"},We={class:"form-value"},Xe={class:"text-center flex-auto"},Ye={class:"form-label"},et={class:"form-value"},tt={class:"text-right flex-auto"},st={class:"form-label"},lt={class:"form-value"},at={__name:"OTC",setup(ot){const{walletInfo:B}=ue([1],1),$=L(()=>d(B.value.total)),{t}=ee(),F=L(()=>[{id:1,name:t("otc.tab1")},{id:2,name:t("otc.tab2")},{id:3,name:t("otcHis.title")}]),o=v(1),I=l=>{o.value=l,O()},y=v(!1),x=v([]),O=()=>{x.value=[],y.value=!0,(o.value===3?ce:ie)({page:1,page_size:99}).then(m=>{o.value===3?x.value=m.items||[]:x.value=m||[]}).finally(()=>{y.value=!1})};te(O);const z=L(()=>[{key:"total_count",name:t("otc.label1"),cb:l=>d(l.total_count)},{key:"success_rate",name:t("otc.label2"),cb:l=>`${re(l.success_rate,!1)}%`},{key:"total_amount",name:t("otc.label3"),cb:l=>d(l.total_amount)},{key:"result_total_amount",name:t("otc.label4"),cb:l=>{const m=o.value===1?l.min_limit:l.sell_min_limit,w=o.value===1?l.max_limit:l.sell_max_limit;return`${d(m)} - ${d(w)}`}},{key:"buy_price",name:t("otc.label5"),nameCb:l=>o.value===1?t("otc.label5"):t("otc.form.label5"),cb:l=>o.value===1?d(l.buy_price):d(l.sell_price)}]),g=v(!1),r=v({}),A=l=>{q.value=1,h.value={},_.value.quantity="",_.value.comments="",r.value=l,g.value=!0},_=v({quantity:"",comments:""}),q=v(1),D=L(()=>{const l=o.value===1?r.value.buy_price:r.value.sell_price;return d(me(l,_.value.quantity))}),h=v({}),E=()=>{h.value={};const l=o.value===1?r.value.min_limit:r.value.sell_min_limit,m=o.value===1?r.value.max_limit:r.value.sell_max_limit;if(+_.value.quantity<+l||+_.value.quantity>+m){h.value.quantity=t("otc.form.error1");return}y.value=!0,ne({quantity:_.value.quantity,product_id:r.value.id,comments:_.value.comments,payment_method:r.value.payment_method[0],trade_type:o.value===1?"buy":"sell"}).then(()=>{q.value=2}).catch(w=>{h.value=w}).finally(()=>{y.value=!1})},G=()=>{g.value=!1;let l=document.querySelector(".gQHKDl");l&&l.click()},j=l=>{if(l.status==="pending")return{text:t("otcHis.status1"),css:"status-yellow"};if(l.status==="rejected")return{text:t("otcHis.status3"),css:"status-red"};if(l.status==="accepted")return{text:t("otcHis.status2"),css:"status-green"}},K=L(()=>[{key:"amount",name:t("otcHis.label1"),cb:l=>l.trade_type==="buy"?t("otc.tab1"):t("otc.tab2")},{key:"amount",name:t("otcHis.label2"),cssCb:()=>"green-color",cb:l=>d(l.amount)},{key:"price",name:t("otcHis.label3"),cb:l=>d(l.price)},{key:"quantity",name:t("otcHis.label4"),cb:l=>d(l.quantity)},{key:"payment_method",name:t("otcHis.label5"),cb:l=>l.payment_method}]);return(l,m)=>{const w=Y,P=X,T=W,V=J,Q=Z,M=R;return N((c(),n("div",de,[s("div",pe,[b(w,{tabList:e(F),tabActive:e(o),onTabChange:I,isBlock:""},null,8,["tabList","tabActive"])]),e(x).length===0?(c(),se(P,{key:0})):le("",!0),[1,2].includes(e(o))?(c(),n("div",ve,[(c(!0),n(f,null,C(e(x),i=>(c(),n("div",{class:"ai-item",key:i.id},[s("div",be,[s("div",fe,a(i.title),1),s("div",he,"1"+a(e(t)("otc.tip")),1)]),s("div",ye,[(c(),n(f,null,C(5,u=>s("img",{src:U,key:u,class:"star",alt:""})),64))]),s("div",xe,[(c(!0),n(f,null,C(e(z),u=>(c(),n("div",{class:"show-li",key:u.key},[u.nameCb?(c(),n("span",{key:0,class:"show-label",innerHTML:u.nameCb(i)},null,8,Ce)):(c(),n("span",ke,a(u.name),1)),s("span",{class:S(["show-value",[u.cssCb?u.cssCb(i):""]])},a(u.cb&&u.cb(i)),3)]))),128))]),b(T,{size:"medium",class:"mt-4",onClick:u=>A(i)},{default:H(()=>[k(a(e(o)===1?e(t)("otc.tab1"):e(t)("otc.tab2"))+"USDC",1)]),_:2},1032,["onClick"])]))),128))])):(c(),n("div",ge,[(c(!0),n(f,null,C(e(x),i=>{var u;return c(),n("div",{class:"ai-item",key:i.id},[s("div",we,[s("div",Le,a((u=i.product)==null?void 0:u.title),1),s("div",{class:S(["status-box ml-auto is-small",[j(i).css]])},a(j(i).text),3)]),s("div",He,[(c(),n(f,null,C(5,p=>s("img",{src:U,key:p,class:"star",alt:""})),64))]),s("div",qe,[(c(!0),n(f,null,C(e(K),p=>(c(),n("div",{class:"show-li",key:p.key},[p.nameCb?(c(),n("span",{key:0,class:"show-label",innerHTML:p.nameCb(i)},null,8,Te)):(c(),n("span",Ve,a(p.name),1)),s("span",{class:S(["show-value",[p.cssCb?p.cssCb(i):""]])},a(p.cb&&p.cb(i)),3)]))),128))])])}),128))])),b(Q,{showFooter:!1,modelValue:e(g),"onUpdate:modelValue":m[3]||(m[3]=i=>oe(g)?g.value=i:null),title:e(t)("otc.tip1")},{default:H(()=>[N((c(),n("div",{class:"h-full flex flex-col overflow-auto",ref:"popup",onClick:m[2]||(m[2]=ae(()=>{},["stop"]))},[e(q)===1?(c(),n(f,{key:0},[s("div",Se,[s("div",Oe,a(e(o)===1?e(t)("otc.form.label1"):e(t)("otc.form.label4")),1),s("div",De,[k("USDC"+a(e(t)("otc.tip2")),1),s("span",je,a(e($)),1)])]),b(V,{isSmall:"",errorObj:e(h),propName:"quantity",modelValue:e(_).quantity,"onUpdate:modelValue":m[0]||(m[0]=i=>e(_).quantity=i),placeholder:`${e(o)===1?e(r).min_limit:e(r).sell_min_limit} - ${e(o)===1?e(r).max_limit:e(r).sell_max_limit}`},null,8,["errorObj","modelValue","placeholder"]),s("div",Me,[s("div",Ne,[k(a(e(o)===1?e(t)("otc.form.label2"):e(t)("otc.form.label5")),1),s("span",Ue,a(e(o)===1?e(r).buy_price:e(r).sell_price),1)]),s("div",Be,[k(a(e(o)===1?e(t)("otc.form.label3"):e(t)("otc.form.label6"))+"(USDC):",1),s("span",$e,a(e(D)),1)])]),s("div",Fe,a(e(t)("otc.form.label7")),1),b(V,{isSmall:"",errorObj:e(h),propName:"payment_method","model-value":e(r).payment_method[0],readonly:"",placeholder:e(r).payment_method[0]},null,8,["errorObj","model-value","placeholder"]),s("div",Ie,a(e(t)("otc.form.label8")),1),b(V,{isSmall:"",errorObj:e(h),propName:"comments",modelValue:e(_).comments,"onUpdate:modelValue":m[1]||(m[1]=i=>e(_).comments=i),placeholder:e(t)("otc.form.pla8")},null,8,["errorObj","modelValue","placeholder"]),b(T,{size:"medium",class:"mt-4",disabled:!e(_).quantity,clickFn:E},{default:H(()=>[k(a(e(t)("otc.form.btn1")),1)]),_:1},8,["disabled"])],64)):(c(),n(f,{key:1},[s("div",ze,[s("div",Ae,[s("div",Ee,[s("div",Ge,a(e(t)("otcHis.label1")),1),s("div",null,a(e(o)==1?e(t)("otc.tab1"):e(t)("otc.tab2"))+" USDC",1)]),s("div",Ke,[s("div",Pe,a(e(t)("otcHis.label2"))+"(USDC)",1),s("div",Qe,a(e(D)),1)])]),s("div",Re,[s("div",Ze,[s("div",Je,a(e(t)("otcHis.label3")),1),s("div",We,a(e(r).buy_price),1)]),s("div",Xe,[s("div",Ye,a(e(t)("otcHis.label4")),1),s("div",et,a(e(_).quantity)+" USDC",1)]),s("div",tt,[s("div",st,a(e(t)("otc.form.label7")),1),s("div",lt,a(e(r).payment_method[0]),1)])])]),b(T,{size:"medium",class:"mt-4",onClick:G},{default:H(()=>[k(a(e(t)("otc.form.btn2")),1)]),_:1})],64))])),[[M,e(y)]])]),_:1},8,["modelValue","title"])])),[[M,e(y)]])}}},Lt=_e(at,[["__scopeId","data-v-a41bc92b"]]);export{Lt as default};
