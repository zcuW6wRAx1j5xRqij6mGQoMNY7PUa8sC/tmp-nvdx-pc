import{T as Ke,R as Xe,C as qe}from"./RightTable-BqGcmWZj.js";/* empty css                  */import{v as Me}from"./el-loading-DLKkykXM.js";import{_ as Be,c as ze}from"./MyInput-Des6Jksq.js";import{_ as Le}from"./MyDialog-D61kNEnW.js";import{_ as Qe}from"./ObTablePage-DmpBIm-X.js";import{b as Re,a as Ge,E as Ze}from"./el-table-column-BtxUw7aK.js";import{a as We,E as Je}from"./index-CB-azdtK.js";import{_ as Ye}from"./MyTab-CvPPF7IE.js";import{u as we,r as b,o as Ie,a as Ee,O as el,a3 as ll,c as I,J as Ve,s as Fe,b as $,d as E,e as r,f as s,g as Z,w as n,k as p,t as o,i as G,h as l,q as D,F as Ae,l as Se,p as al}from"./index-sRNqgdFD.js";import{j as Oe,k as tl,l as ol,u as sl,m as nl,n as rl,i as ul}from"./data-DOzr8Xtg.js";import{s as Ne}from"./index-B4oU7Ve4.js";import{c as Ue,f as v,m as B,e as je,d as pe,a as $e,b as Ce,p as ke,r as ce}from"./utils-BFyP1kS5.js";import{d as de}from"./dayjs.min-CDit7P-7.js";import{u as He}from"./useBalance-D7ia67N2.js";import{_ as Te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as il}from"./MyButton-NG0OFodt.js";import{u as cl}from"./useSocket-R8ozz54L.js";import"./dropdown-BVS1iGXQ.js";/* empty css                  */import"./index-BLWTovwI.js";import"./use-form-item-D2xdO-cN.js";import"./refs-D66wpJr-.js";import"./NoData-95ZKbnPO.js";import"./my-VK3vBoCp.js";const dl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAj9JREFUOE+Nk0tIlGEUhp/3nzHNokiL6LIUKgjKoIUl8c+FKIKiwn+MwIk2tgra1CZqpFq0CSIiKCjRypmxrKCNNqOJUCIIrSJoE3RZRKm5MBXnPzEz3lIEv+X7ne8573cuYolj6ZoKtLoamyoj54wyyUfFs78XhmuhYKnQfqQmTJFFbLMOctzU6e6BmbtZgCXcINudS0jXwYYxXgLt+DaGQyVOoB7zXdAGTOf5VHtXiYQ/B0hFL4NdAzKMjBxT4+DYInf5b1n5MyCUh6g+c6cAsGR4D9Ig0KlY9tDMQ7OEQ6rvKk7FDXntk7N6MtKLOEDO31kEpCLtQFixbOX8rPbILaM88BcFK+V1Ds0C8k5Y+QVTh+xJ7TqCpUPIOuR1n1wOYDppB3BYlo7WYtaHKa76TEvBdvPbFdOgvINhgsHNjE4MF7Qz7qSU8C0VPge6J2sLHcFxXiPfldfTa8lIE+LKUvOBrEFed6s9deMEAs2yZGQvYgD5jfJ67lu6LgCjawuAAKVMTf3ArAqnpOiANX/ktecsFboAzi1Zy8FVrJj6hfRGsezRZdcgHe0E2z3dhehDzE7hjG2R936u2kt1oS1ajWP9wIMiIO1WYYHPQL9i2Zq5OUCkQsdx1r/K2y7EFqEfgE34uV1zk5iM1CPagAHG7YTi3d8XTWIyugPZC2Ab+DHFetL/LZMlw3VIrYXyoS6Md8i+gaowq0XsA8ZBZxXLPM8nWLyNj92tlDgXQR6wcZ6Lr0ArE4Hbauj6OaP/A7a/8acWXs6KAAAAAElFTkSuQmCC",pl={class:"table-box"},bl={class:"box-tab"},ml={class:"flex"},vl=["src"],fl=["onClick"],_l={class:"flex"},gl=["src"],hl={class:"flex items-center justify-end"},yl=["onClick"],Ol=["onClick"],$l=["onClick"],Cl={class:"flex"},kl=["src"],Vl={class:"my-dialog-body"},Al={class:"h-full flex flex-col pb-4"},Sl={class:"level-select mb-5"},Il=["onClick"],Tl={class:"flex items-center"},Dl={class:"flex items-center justify-between"},Ul={class:"bond-label"},jl={class:"bond-value"},Ml={class:"flex justify-between"},Bl={class:"bond-box"},Ll={class:"bond-label"},Rl={class:"bond-label"},Yl={class:"bond-label"},wl={class:"bond-box text-center"},El={class:"bond-label"},Fl={class:"bond-value"},Nl={class:"bond-box text-right"},Hl={class:"bond-label"},Pl={class:"bond-value"},xl={__name:"ContractTableBox",props:{isRefreshBottomTable:{type:Boolean,default:!1},symbolInfo:{type:Object,default:()=>{}},recordMap:{type:Object,default:()=>({})},setSub:{type:Function,default:()=>{}}},emits:["change"],setup(re,{emit:F}){const{getContractBalance:L,getWalletData:W}=He([2]),{t:a}=we(),O=re,x=b({});function J(t){var Q;let i=(Q=t.data)==null?void 0:Q.event;if(i==="refresh"&&j(),i==="order_margin_ratio"){let ne=t.data.payload||{};x.value[ne.order_id]=ne}}Ie(()=>{O.setSub(`person:${localStorage.getItem("uid")}`,J,localStorage.getItem("ws_channel_token")),ee()}),ll(()=>{k.value&&(clearInterval(k.value),k.value=null)});const N=I(()=>{var t,i;return(i=(t=O.symbolInfo)==null?void 0:t.quote_asset)==null?void 0:i.toUpperCase()}),R=I(()=>[{name:a("contractOpe.tab.tab1"),id:1},{name:a("contractOpe.tab.tab2"),id:2},{name:a("contractOpe.tab.tab3"),id:3}]),h=b(1),k=b(null),d=t=>{h.value=t,j(),ee()},ee=()=>{k.value&&(clearInterval(k.value),k.value=null),h.value===2&&(k.value=setInterval(()=>{j()},5e3))},U=b(!1),V=Ee({futures_id:void 0,status:"pending"}),g=b(!1),A=b(!1),ue=b({}),be=()=>{if(S.value)return;S.value=!0,(oe.value===1?tl:ol)({order_id:ue.value.id}).then(()=>{ae()}).finally(()=>{S.value=!1})},le=b(!1),j=()=>{[1,2].includes(h.value)?(V.status=h.value===1?"pending":"open",V.futures_id=le.value?O.symbolInfo.id:void 0):V.status="closed",el(()=>{g.value=!g.value})};Ve(()=>O.isRefreshBottomTable,(t,i)=>{t!==i&&j()});function ae(){j(),De("change"),Ne(a("common.opeSuccess")),W(2),A.value=!1,T.value=!1,Y.value=!1}const De=F,S=b(!1),oe=b(1),K=(t,i)=>{oe.value=i,ue.value=t,A.value=!0},H=t=>{le.value=t,j()};function M(t,i){let Q=O.recordMap[t.symbol]||{};return t[i]=+Q[i]||0,+Q[i]||0}const ie=t=>(t=Ce(t),typeof t=="number"?t<0?"red-color":"green-color":typeof t=="string"?t.startsWith("-")?"red-color":"green-color":""),te=t=>ke(pe(X(t),t.margin)),X=t=>{let i=B(t.volume,je(M(t,"price"),t.open_price));return t.side==="sell"?B(i,-1):i},T=b(!1),y=b({}),u=b({sl:"",tp:""}),m=t=>{y.value=t,u.value.sl=v(t.sl),u.value.tp=v(t.tp),T.value=!0},q=b({}),z=()=>{S.value||(S.value=!0,sl({order_id:y.value.id,sl:u.value.sl,tp:u.value.tp}).then(()=>{ae()}).catch(t=>{q.value=t}).finally(()=>{S.value=!1}))},Y=b(!1),C=b(0),me=t=>{Y.value=!0,y.value=t,C.value=0},ve=I(()=>[{name:a("contractOpe.bond.tab.tab1"),id:1},{name:a("contractOpe.bond.tab.tab2"),id:2}]),P=b(1),fe=t=>{P.value=t},f=()=>{if(S.value)return;S.value=!0;const t=P.value===1?C.value:-C.value;nl({order_id:y.value.id,amount:t}).then(()=>{ae()}).catch(i=>{q.value=i}).finally(()=>{S.value=!1})},se=I(()=>{const t=P.value===1?C.value:-C.value;return Ue(+y.value.margin,+t)}),Pe=I(()=>y.value.side==="buy"?v(B(y.value.open_price,je(1,pe(se.value,B(y.value.open_price,y.value.volume))))):v(B(y.value.open_price,Ue(1,pe(se.value,B(y.value.open_price,y.value.volume))))));return(t,i)=>{const Q=Ye,ne=Re,c=Ge,_e=Ze,ge=Qe,he=Le,ye=Be,xe=Me;return Fe(($(),E("div",pl,[r("div",bl,[s(Q,{tabList:R.value,tabActive:h.value,onTabChange:d,class:"flex-shrink-0 mb-4",isBlock:""},null,8,["tabList","tabActive"]),[1,2].includes(h.value)?($(),Z(ne,{key:0,onChange:H,modelValue:le.value,"onUpdate:modelValue":i[0]||(i[0]=_=>le.value=_),class:"ml-auto"},{default:n(()=>[p(o(t.$t("spotOpe.hidden")),1)]),_:1},8,["modelValue"])):G("",!0)]),h.value==1?($(),Z(ge,{key:0,tableRefresh:g.value,tableParams:V,hasBtn:!1,tableSearch:U.value,isPage:!1,getTableUrl:l(Oe),defaultGet:!1,isSmall:""},{table:n(({tableData:_})=>[s(_e,{data:_,height:"auto"},{default:n(()=>[s(c,{label:l(a)("contractOpe.colum.field1"),width:"150"},{default:n(({row:e})=>[r("div",ml,[r("img",{src:l($e)(e.logo),class:"b-img",alt:""},null,8,vl),p(" "+o(e.name),1)])]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field2")},{default:n(({row:e})=>[p(o(e.trade_type==="limit"?t.$t("spotOpe.order.order1"):t.$t("spotOpe.order.order2")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field3")},{default:n(({row:e})=>[r("div",{class:D([e.side==="buy"?"green-color":"red-color"])},o(e.side==="buy"?t.$t("spotOpe.type.type1"):t.$t("spotOpe.type.type2")),3)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field4")},{default:n(({row:e})=>[p(o(l(de)(e.created_at).format("DD.MM.YYYY HH:mm:ss")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field5"),align:"right"},{default:n(({row:e})=>[p(o(e.margin_type==="crossed"?t.$t("contractOpe.level.tab.tab1"):t.$t("contractOpe.level.tab.tab2"))+" "+o(e.leverage)+"x ",1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field6"),align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.price)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum.field7")}`,align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.match_price)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum.field8")}`,align:"right","min-width":"100"},{default:n(({row:e})=>[p(o(l(v)(e.volume)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum.field9")}`,align:"right","min-width":"100"},{default:n(({row:e})=>[p(o(l(v)(e.trade_volume)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum.field10")}`,width:"100"},{default:n(({row:e})=>[r("div",{class:"ope-btn",onClick:w=>K(e,1)},o(t.$t("spotOpe.cancel")),9,fl)]),_:1},8,["label"])]),_:2},1032,["data"])]),_:1},8,["tableRefresh","tableParams","tableSearch","getTableUrl"])):G("",!0),h.value==2?($(),Z(ge,{key:1,hideLoading:"",tableRefresh:g.value,tableParams:V,hasBtn:!1,isPage:!1,getTableUrl:l(Oe),defaultGet:!1,isSmall:""},{table:n(({tableData:_})=>[s(_e,{data:_,height:"auto"},{default:n(()=>[s(c,{label:l(a)("contractOpe.colum.field1"),width:"150",fixed:""},{default:n(({row:e})=>[r("div",_l,[r("img",{src:l($e)(e.logo),class:"b-img",alt:""},null,8,gl),p(" "+o(e.name),1)])]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field2"),"min-width":"120"},{default:n(({row:e})=>[p(o(e.trade_type==="limit"?t.$t("spotOpe.order.order1"):t.$t("spotOpe.order.order2")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field3"),width:"100"},{default:n(({row:e})=>[r("div",{class:D([e.side==="buy"?"green-color":"red-color"])},o(e.side==="buy"?t.$t("spotOpe.type.type1"):t.$t("spotOpe.type.type2")),3)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field4"),width:"160"},{default:n(({row:e})=>[p(o(l(de)(e.created_at).format("DD.MM.YYYY HH:mm:ss")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum2.label7"),width:"100",align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.price)),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum.field5"),align:"right","min-width":"120"},{default:n(({row:e})=>[p(o(e.margin_type==="crossed"?t.$t("contractOpe.level.tab.tab1"):t.$t("contractOpe.level.tab.tab2"))+" "+o(e.leverage)+"x ",1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.colum2.field6"),align:"right","min-width":"120"},{default:n(({row:e})=>[r("div",{class:D([ie(X(e))])},o(l(v)(X(e))),3)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.field7")}`,align:"right","min-width":"130"},{default:n(({row:e})=>[r("div",{class:D([ie(te(e))])},o(te(e))+"% ",3)]),_:1},8,["label"]),s(c,{label:`${l(a)("unit.number")}`,align:"right","min-width":"120"},{default:n(({row:e})=>[p(o(l(v)(e.lots)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.label1")}`,align:"right","min-width":"120"},{default:n(({row:e})=>[p(o(l(v)(e.volume)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.label2")}(${N.value})`,align:"right","min-width":"120"},{default:n(({row:e})=>[r("div",hl,[p(o(l(v)(e.margin))+" ",1),e.margin_type==="isolated"?($(),E("img",{key:0,src:dl,class:"w-4 h-4 ml-2",alt:"",onClick:w=>me(e)},null,8,yl)):G("",!0)])]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.label3")}`,align:"right","min-width":"120"},{default:n(({row:e})=>{var w;return[p(o(`${e.margin_type!=="crossed"?l(v)(e.margin_ratio):l(ke)(((w=x.value[e.id])==null?void 0:w.margin_ratio)||e.margin_ratio,!1)}%`),1)]}),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.label4")}`,align:"right","min-width":"120"},{default:n(({row:e})=>[p(o(l(v)(e.open_fee)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.label5")}`,align:"right","min-width":"120"},{default:n(({row:e})=>[p(o(l(v)(e.open_price)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum2.label6")}`,align:"right","min-width":"120"},{default:n(({row:e})=>{var w;return[p(o(e.margin_type!=="crossed"?l(v)(e.force_close_price):((w=x.value[e.id])==null?void 0:w.force_price)||l(v)(e.force_close_price)),1)]}),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.colum.field10")}`,width:"100",fixed:"right"},{default:n(({row:e})=>[r("div",{class:"ope-btn-blue",onClick:w=>m(e)},o(t.$t("contractOpe.colum2.btn1")),9,Ol),r("div",{class:"ope-btn ml-5",onClick:w=>K(e,2)},o(t.$t("contractOpe.colum2.btn2")),9,$l)]),_:1},8,["label"])]),_:2},1032,["data"])]),_:1},8,["tableRefresh","tableParams","getTableUrl"])):G("",!0),h.value==3?($(),Z(ge,{key:2,tableRefresh:g.value,hasBtn:!1,isPage:!1,getTableUrl:l(Oe),defaultGet:!1,tableParams:V,isSmall:""},{table:n(({tableData:_})=>[s(_e,{data:_,height:"auto"},{default:n(()=>[s(c,{label:l(a)("contractOpe.history.field1"),width:"150"},{default:n(({row:e})=>[r("div",Cl,[r("img",{src:l($e)(e.logo),class:"b-img",alt:""},null,8,kl),p(" "+o(e.name),1)])]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.history.field2")},{default:n(({row:e})=>[p(o(e.trade_type==="limit"?t.$t("spotOpe.order.order1"):t.$t("spotOpe.order.order2")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.history.field3"),width:"100"},{default:n(({row:e})=>[r("div",{class:D([e.side==="buy"?"green-color":"red-color"])},o(e.side==="buy"?t.$t("spotOpe.type.type1"):t.$t("spotOpe.type.type2")),3)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.history.field4")},{default:n(({row:e})=>[p(o(l(de)(e.created_at).format("DD.MM.YYYY HH:mm:ss")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.history.field13")},{default:n(({row:e})=>[p(o(l(de)(e.close_time).format("DD.MM.YYYY HH:mm:ss")),1)]),_:1},8,["label"]),s(c,{label:l(a)("contractOpe.history.field5"),align:"right"},{default:n(({row:e})=>[p(o(e.margin_type==="crossed"?t.$t("contractOpe.level.tab.tab1"):t.$t("contractOpe.level.tab.tab2"))+" "+o(e.leverage)+"x ",1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field6")}`,align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.volume)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field7")}`,align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.open_price)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field14")}`,align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.close_price)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field11")}`,align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.open_fee)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field12")}`,align:"right"},{default:n(({row:e})=>[p(o(l(v)(e.close_fee)),1)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field8")}(${N.value})`,align:"right"},{default:n(({row:e})=>[r("div",{class:D([(e.trade_status==="open"?l(Ce)(X(e)):+e.profit)>=0?"green-color":"red-color"])},o(e.trade_status==="open"?X(e):l(v)(e.profit)),3)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field10")}`,align:"right"},{default:n(({row:e})=>[r("div",{class:D([(e.trade_status==="open"?l(Ce)(te(e)):+e.profit_ratio)>=0?"green-color":"red-color"])},o(e.trade_status==="open"?`${te(e)}%`:`${l(ke)(e.profit_ratio)}%`),3)]),_:1},8,["label"]),s(c,{label:`${l(a)("contractOpe.history.field9")}`,width:"120"},{default:n(({row:e})=>[r("div",{class:D([e.trade_status==="closed"?"green-color":e.trade_status==="cancel"?"color-red":"color-grey"])},o(t.$t(`contractOpe.status.${e.trade_status}`)),3)]),_:1},8,["label"])]),_:2},1032,["data"])]),_:1},8,["tableRefresh","getTableUrl","tableParams"])):G("",!0),s(he,{modelValue:A.value,"onUpdate:modelValue":i[1]||(i[1]=_=>A.value=_),title:l(a)("common.text3"),width:"343px",onConfirm:be,onClose:i[2]||(i[2]=_=>A.value=!1)},{default:n(()=>[r("div",Vl,o(oe.value===1?l(a)("contractOpe.cancelText"):l(a)("contractOpe.closeText")),1)]),_:1},8,["modelValue","title"]),s(he,{modelValue:T.value,"onUpdate:modelValue":i[5]||(i[5]=_=>T.value=_),title:l(a)("contractOpe.orderSure.info.label4"),width:"343px",onConfirm:z,onClose:i[6]||(i[6]=_=>T.value=!1),disabled:!u.value.sl||!u.value.tp},{default:n(()=>[s(ye,{modelValue:u.value.tp,"onUpdate:modelValue":i[3]||(i[3]=_=>u.value.tp=_),placeholder:t.$t("contractOpe.check.label1"),errorObj:q.value,propName:"tp",isSmall:""},null,8,["modelValue","placeholder","errorObj"]),s(ye,{modelValue:u.value.sl,"onUpdate:modelValue":i[4]||(i[4]=_=>u.value.sl=_),placeholder:t.$t("contractOpe.check.label2"),errorObj:q.value,propName:"sl",isSmall:""},null,8,["modelValue","placeholder","errorObj"])]),_:1},8,["modelValue","title","disabled"]),s(he,{modelValue:Y.value,"onUpdate:modelValue":i[9]||(i[9]=_=>Y.value=_),title:l(a)("contractOpe.bond.title"),width:"383px",onConfirm:f,onClose:i[10]||(i[10]=_=>Y.value=!1),disabled:!C.value},{default:n(()=>[r("div",Al,[r("div",Sl,[($(!0),E(Ae,null,Se(ve.value,_=>($(),E("div",{class:D(["level-item",{active:P.value===_.id}]),key:_.id,onClick:e=>fe(_.id)},o(_.name),11,Il))),128))]),s(ye,{modelValue:C.value,"onUpdate:modelValue":i[8]||(i[8]=_=>C.value=_),errorObj:q.value,propName:"sl",isSmall:"",hasSuffix:""},{suffix:n(()=>[r("div",Tl,[i[11]||(i[11]=p(" USDC ")),r("span",{class:"all-btn",onClick:i[7]||(i[7]=_=>C.value=+l(L))},o(t.$t("contractOpe.bond.all")),1)])]),_:1},8,["modelValue","errorObj"]),r("div",Dl,[r("div",Ul,o(t.$t("contractOpe.bond.label1")),1),r("div",jl,o(l(L))+"USDC",1)]),r("div",Ml,[r("div",Bl,[r("div",Ll,o(y.value.name),1),r("div",Rl,o(t.$t("contractOpe.bond.info.label3")),1),r("div",Yl,o(t.$t("contractOpe.bond.info.label4")),1)]),r("div",wl,[r("div",El,o(t.$t("contractOpe.bond.info.label1")),1),r("div",Fl,o(y.value.margin),1),r("div",{class:D(["bond-value",[P.value===0?"green-color":"red-color "]])},o(l(v)(se.value)),3)]),r("div",Nl,[r("div",Hl,o(t.$t("contractOpe.bond.info.label2")),1),r("div",Pl,o(y.value.force_close_price),1),r("div",{class:D(["bond-value",[P.value===0?"green-color":"red-color "]])},o(Pe.value),3)])])])]),_:1},8,["modelValue","title","disabled"])])),[[xe,S.value,void 0,{fullscreen:!0,lock:!0}]])}}},Kl=Te(xl,[["__scopeId","data-v-f494e39f"]]),Xl={class:"trading-operation"},ql={class:"title"},zl={class:"balance"},Ql={class:"title"},Gl={class:"balance"},Zl={class:"bond-label"},Wl={class:"bond-value"},Jl={__name:"ContractTransaction",props:{symbolInfo:{type:Object,default:()=>{}},unsubscribeChannel:{type:Function,required:!1},isSpot:{type:Boolean,default:!1},symbolData:{type:Object,default:()=>{}},walletRefresh:{type:Boolean,default:!1}},emits:["refreshBottomTable"],setup(re,{emit:F}){const{getContractBalance:L,getWalletData:W}=He([2]),{t:a}=we(),O=re;Ve(()=>O.walletRefresh,()=>{j=!0,U(),W(2)});const x=I(()=>{var u,m;return(m=(u=O.symbolInfo)==null?void 0:u.quote_asset)==null?void 0:m.toUpperCase()}),J=I(()=>{var u,m;return(m=(u=O.symbolInfo)==null?void 0:u.base_asset)==null?void 0:m.toUpperCase()});let N=F;const R=b({}),h=b([]);Ie(()=>{ze().then(u=>{h.value=Object.keys(u).map(m=>({name:`${m}X`,value:m,isDisabled:+u[m]==0})),h.value.length>0&&(k.value.leverage=h.value[0].value,U())})});const k=b({document_type_label:"",document_type:"market",price:0,amount:"",leverage:100,margin_type:"crossed"}),d=b({...k.value}),ee=I(()=>d.value.document_type==="limit"),U=()=>{d.value={...k.value},H.value=!1,K(),d.value.price=v(ae.value.price)},V=b(!1),g=b(!1),A=b(""),ue=u=>{A.value=u,g.value=!0},be=I(()=>{const u=d.value.margin_type==="crossed"?a("contractOpe.level.tab.tab1"):a("contractOpe.level.tab.tab2");return[{name:a("contractOpe.orderSure.info.label1"),value:`â‰ˆ ${d.value.price} USDC`},{name:a("contractOpe.orderSure.info.label2"),value:`${a("unit.lots")}  ${d.value.amount} = ${v(B(ce(d.value.amount),100))} USDC`},{name:a("contractOpe.orderSure.info.label3"),value:`${u}${d.value.leverage}x`},{name:a("contractOpe.orderSure.info.label4"),value:`${M.value.tp||"-"}/${M.value.sl||"-"}`},{name:a("contractOpe.orderSure.info.label5"),value:`${A.value==="buy"?a("contractOpe.btn.btn1"):a("contractOpe.btn.btn2")}`}]}),le=async()=>{if(V.value)return;let u={futures_id:O.symbolInfo.id,side:A.value,trade_volume:d.value.amount,trade_type:d.value.document_type,leverage:d.value.leverage,price:d.value.price,margin_type:d.value.margin_type,lots:d.value.amount};return H.value&&(u={...u,...M.value}),V.value=!0,rl(u).then(()=>{Ne(a("common.opeSuccess")),U(),W(2),g.value=!1,N("refreshBottomTable")}).finally(()=>{V.value=!1})};let j=!0;const ae=b({});Ve(()=>O.symbolData,u=>{u.symbol===O.symbolData.symbol&&(ae.value=u,j&&(j=!1,d.value.price=v(u.price)))});const S=u=>{U(),d.value.document_type=u},oe=I(()=>B(ce(d.value.amount),100));function K(){d.value.amount="",d.value.money="",M.value={sl:"",tp:""},ie.value=0}const H=b(!1),M=b({sl:"",tp:""});Ee({0:{},25:{},50:{},75:{},100:{}});const ie=b(0),te=I(()=>v(pe(B(B(ce(d.value.amount),100),d.value.leverage),ce(d.value.price)))),X=I(()=>[{name:a("contractOpe.btn.btn1"),id:"buy"},{name:a("contractOpe.btn.btn2"),id:"sell"}]),T=b("buy"),y=u=>{T.value=u};return(u,m)=>{const q=Ye,z=We,Y=Je,C=Be,me=Re,ve=il,P=Le,fe=Me;return Fe(($(),E("div",Xl,[s(q,{tabList:l(X),tabActive:T.value,onTabChange:y,class:"flex-shrink-0 mb-4 w-full",isBlock:""},null,8,["tabList","tabActive"]),s(Y,{"popper-class":"my-select-popper",size:"large",modelValue:d.value.margin_type,"onUpdate:modelValue":m[0]||(m[0]=f=>d.value.margin_type=f),onChange:K,placeholder:u.$t("contractOpe.level.title")},{default:n(()=>[s(z,{label:u.$t("contractOpe.level.tab.tab1"),value:"crossed"},null,8,["label"]),s(z,{label:u.$t("contractOpe.level.tab.tab2"),value:"isolated"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),s(Y,{"popper-class":"my-select-popper",size:"large",modelValue:d.value.leverage,"onUpdate:modelValue":m[1]||(m[1]=f=>d.value.leverage=f),onChange:K,placeholder:u.$t("assets.table.field25")},{default:n(()=>[($(!0),E(Ae,null,Se(h.value,f=>($(),Z(z,{key:f.value,label:f.name,value:f.value,disabled:f.isDisabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue","placeholder"]),s(C,{isLarge:"",placeholder:l(a)("tradingCommon.placeholder.text3"),disabled:!l(ee),modelValue:d.value.price,"onUpdate:modelValue":m[2]||(m[2]=f=>d.value.price=f),errorObj:R.value,propName:"price",onInput:K},null,8,["placeholder","disabled","modelValue","errorObj"]),s(me,{modelValue:H.value,"onUpdate:modelValue":m[3]||(m[3]=f=>H.value=f),class:"mb-2"},{default:n(()=>[p(o(u.$t("contractOpe.check.checkTxt")),1)]),_:1},8,["modelValue"]),H.value?($(),Z(C,{key:0,isLarge:"",placeholder:l(a)("contractOpe.check.label1"),modelValue:M.value.tp,"onUpdate:modelValue":m[4]||(m[4]=f=>M.value.tp=f),errorObj:R.value,propName:"tp"},null,8,["placeholder","modelValue","errorObj"])):G("",!0),H.value?($(),Z(C,{key:1,isLarge:"",placeholder:l(a)("contractOpe.check.label2"),modelValue:M.value.sl,"onUpdate:modelValue":m[5]||(m[5]=f=>M.value.sl=f),errorObj:R.value,propName:"sl"},null,8,["placeholder","modelValue","errorObj"])):G("",!0),s(Y,{"popper-class":"my-select-popper",size:"large",modelValue:d.value.document_type,"onUpdate:modelValue":m[6]||(m[6]=f=>d.value.document_type=f),placeholder:u.$t("tradingCommon.placeholder.text1"),onChange:S},{default:n(()=>[s(z,{label:u.$t("spotOpe.order.order1"),value:"limit"},null,8,["label"]),s(z,{label:u.$t("spotOpe.order.order2"),value:"market"},null,8,["label"])]),_:1},8,["modelValue","placeholder"]),s(C,{isLarge:"",modelValue:d.value.amount,"onUpdate:modelValue":m[7]||(m[7]=f=>d.value.amount=f),type:"number",placeholder:l(a)("assets.table.field2"),errorObj:R.value,propName:"amount",hasSuffix:""},{suffix:n(()=>[p(o(u.$t("unit.lots")),1)]),_:1},8,["modelValue","placeholder","errorObj"]),s(C,{isLarge:"",modelValue:l(te),placeholder:l(a)("unit.tradeVolume"),disabled:"",errorObj:R.value,propName:"amount",hasSuffix:""},{suffix:n(()=>[r("span",null,o(l(J)),1)]),_:1},8,["modelValue","placeholder","errorObj"]),m[10]||(m[10]=r("div",{class:"title"},[p(" 1x = "),r("span",{class:"font-bold ml-1"},"100 USDC")],-1)),r("div",ql,[p(o(u.$t("walletAsset.spotWallet.wallet1"))+" ",1),r("span",zl,o(l(L))+" USDC",1)]),r("div",Ql,[p(o(u.$t("contractOpe.label.label2"))+" ",1),r("span",Gl,o(l(oe))+" "+o(l(x)),1)]),s(ve,{size:"large",clickFn:()=>ue(T.value),class:"mt-auto",type:T.value==="buy"?"green":"danger",disabled:!d.value.leverage||!d.value.amount},{default:n(()=>[p(o(T.value==="buy"?u.$t("contractOpe.btn.btn1"):u.$t("contractOpe.btn.btn2")),1)]),_:1},8,["clickFn","type","disabled"]),s(P,{modelValue:g.value,"onUpdate:modelValue":m[8]||(m[8]=f=>g.value=f),title:l(a)("contractOpe.orderSure.title"),onConfirm:le,onClose:m[9]||(m[9]=f=>g.value=!1),width:400},{default:n(()=>[($(!0),E(Ae,null,Se(l(be),(f,se)=>($(),E("div",{class:"flex items-center justify-between mt-4",key:se},[r("div",Zl,o(f.name),1),r("div",Wl,o(f.value),1)]))),128))]),_:1},8,["modelValue","title"])])),[[fe,V.value,void 0,{fullscreen:!0,lock:!0}]])}}},ea=Te(Jl,[["__scopeId","data-v-491403b2"]]),la={class:"contract-trading"},aa={class:"contract-top flex"},ta={class:"top-box"},oa={__name:"ContractTrading",setup(re){const{setSub:F,unsubscribeChannel:L}=cl(),W=al(),a=b({}),O=b(+W.query.id),x=async g=>{O.value=g.id,await J(),V()},J=()=>O.value?ul({symbol_id:O.value,symbol_type:"futures"}).then(A=>{a.value=A||{},k()}):void 0;Ie(J);const N=b({}),R=g=>{N.value=g},h=b(!1),k=()=>{h.value=!h.value},d=b({}),ee=g=>{d.value=g},U=b(!1),V=()=>{U.value=!U.value};return(g,A)=>($(),E("div",la,[s(Ke,{isSpot:!1,setSub:l(F),symbolInfo:a.value,onChangeData:R,onChangeCoin:x,unsubscribeChannel:l(L),onGetRecordMap:ee},null,8,["setSub","symbolInfo","unsubscribeChannel"]),r("div",aa,[s(Xe,{isSpots:!1,setSub:l(F),symbolInfo:a.value,unsubscribeChannel:l(L),symbolData:N.value},null,8,["setSub","symbolInfo","unsubscribeChannel","symbolData"]),r("div",ta,[s(qe,{isSpot:!1,setSub:l(F),symbolInfo:a.value,unsubscribeChannel:l(L)},null,8,["setSub","symbolInfo","unsubscribeChannel"]),s(ea,{isSpot:!1,symbolInfo:a.value,unsubscribeChannel:l(L),symbolData:N.value,onRefreshBottomTable:k,walletRefresh:U.value},null,8,["symbolInfo","unsubscribeChannel","symbolData","walletRefresh"])])]),s(Kl,{setSub:l(F),symbolInfo:a.value,isRefreshBottomTable:h.value,recordMap:d.value,onChange:V},null,8,["setSub","symbolInfo","isRefreshBottomTable","recordMap"])]))}},Da=Te(oa,[["__scopeId","data-v-6119a659"]]);export{Da as default};
