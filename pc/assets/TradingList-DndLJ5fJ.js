import{_ as se}from"./ObTablePage-DmpBIm-X.js";/* empty css                  */import"./index-B4oU7Ve4.js";import{_ as ne}from"./MyTab-CvPPF7IE.js";import{r as h,c as w,J as X,O as ie,o as K,a3 as Q,b as n,d as i,F as S,l as A,Z as k,t as C,i as q,e as f,q as P,B as O,k as L,u as re,j as ce,a as ue,f as x,h as o,a4 as de,w as m,a5 as he,X as pe,n as U}from"./index-sRNqgdFD.js";import{u as ve}from"./useSocket-R8ozz54L.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as G,b as J,c as ge,d as me}from"./data-DOzr8Xtg.js";import{f as V,a as Ce}from"./utils-BFyP1kS5.js";import{f as be,g as _e}from"./index-CB-azdtK.js";import"./el-loading-DLKkykXM.js";import"./NoData-95ZKbnPO.js";import"./use-form-item-D2xdO-cN.js";const fe="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Vector'%20d='M19.9295%207.60088C19.765%207.07833%2019.3419%206.69829%2018.8131%206.61516L17.1912%206.36576L13.8418%205.78383C13.642%205.7482%2013.4657%205.61756%2013.3717%205.42754V5.41566C13.3599%205.36816%2013.3599%205.33253%2013.3364%205.28503L11.2445%200.819579C11.1857%200.688941%2011.1035%200.570179%2011.0212%200.47517C10.7509%200.178265%2010.3983%200.00012207%2010.0105%200.00012207C9.48161%200.00012207%209.01151%200.308903%208.77646%200.807703L6.42597%205.81946L1.18437%206.62704C0.655514%206.71017%200.232426%207.07833%200.0678911%207.61276C-0.0966433%208.14719%200.0443862%208.71725%200.420465%209.09728L4.21651%2012.9927L3.32332%2018.4914C3.2293%2019.0377%203.44085%2019.584%203.87569%2019.9046C4.29878%2020.2371%204.86289%2020.2728%205.32124%2020.0115L10.0105%2017.4106L14.6997%2020.0115C14.8995%2020.1303%2015.1228%2020.1778%2015.3343%2020.1778C15.6164%2020.1778%2015.8985%2020.0828%2016.1453%2019.8927C16.5683%2019.5602%2016.7799%2019.0258%2016.6976%2018.4795L15.8044%2012.9808L19.6005%209.08541C19.9648%208.70537%2020.0941%208.13531%2019.9295%207.60088Z'%20fill='%23FFC148'/%3e%3c/svg%3e",we="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20id='Vector'%20d='M17.064%207.04679L17.0782%207.0491L18.6976%207.29586C18.698%207.29591%2018.6983%207.29596%2018.6986%207.29601C18.9312%207.33261%2019.1309%207.49746%2019.214%207.75632C19.3001%208.03623%2019.2254%208.31019%2019.0632%208.47925C19.0626%208.47985%2019.062%208.48045%2019.0615%208.48105L15.2697%2012.3366C15.1019%2012.5072%2015.0256%2012.7476%2015.0643%2012.9838L15.9567%2018.4273C15.9969%2018.7003%2015.8915%2018.9568%2015.6874%2019.1174C15.5672%2019.2082%2015.4449%2019.2439%2015.3343%2019.2439C15.2306%2019.2439%2015.1442%2019.2205%2015.0803%2019.1829C15.0773%2019.1811%2015.0742%2019.1793%2015.0711%2019.1776C15.0678%2019.1756%2015.0644%2019.1737%2015.0609%2019.1719L10.3717%2016.5947C10.1468%2016.471%209.87419%2016.471%209.64924%2016.5947L4.96%2019.1719L4.95998%2019.1718L4.95238%2019.1761C4.75385%2019.2882%204.51736%2019.2723%204.33652%2019.1315C4.33048%2019.1268%204.32436%2019.1222%204.31817%2019.1177C4.12227%2018.9745%204.01522%2018.722%204.06226%2018.4512L4.06229%2018.4512L4.06344%2018.4441L4.95663%2012.9956C4.99534%2012.7594%204.91904%2012.519%204.75125%2012.3483L0.955201%208.48842L0.955216%208.48841L0.951146%208.48433C0.774967%208.30792%200.700827%208.03391%200.784117%207.76584C0.865295%207.50456%201.05877%207.34548%201.29892%207.30776C1.29921%207.30772%201.29951%207.30767%201.2998%207.30762L6.53916%206.50774C6.78559%206.47012%206.99723%206.31251%207.10387%206.08719L9.45377%201.12233C9.45385%201.12218%209.45392%201.12202%209.45399%201.12187C9.57111%200.875995%209.7856%200.75%2010.0105%200.75C10.1552%200.75%2010.3135%200.81226%2010.4624%200.97111C10.5046%201.02056%2010.5401%201.07466%2010.5616%201.12201L10.5615%201.12204L10.5664%201.13256L12.6319%205.50129C12.6441%205.57468%2012.6672%205.64607%2012.7007%205.71304C12.9008%206.1139%2013.2777%206.39297%2013.7113%206.4696L13.7145%206.47016L17.064%207.04679ZM12.6608%205.56237L12.6654%205.57183C12.6638%205.56868%2012.6623%205.56553%2012.6608%205.56237Z'%20stroke='%23868686'%20stroke-width='1.5'%20stroke-linejoin='round'/%3e%3c/svg%3e",Le=r=>{const c=r;return c.install=s=>{s.component(c.name,r)},r},ye={key:0,class:"table-header"},ke=["onMouseenter","onClick"],xe={key:1},Se=["onMouseenter","onClick"],Te={key:1,class:"table-loading"},$e={__name:"CustomTable",props:{data:{type:Array,default:()=>[]},columns:{type:Array,default:()=>[]},height:{type:String,default:"auto"},showHeader:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},rowHeight:{type:Number,default:50},virtualScroll:{type:Boolean,default:!0}},emits:["row-click","cell-click"],setup(r,{emit:c}){const s=r,T=c,$=h(null),b=h(-1),_=h(0),M=h(0),z=w(()=>s.virtualScroll?Math.ceil(M.value/s.rowHeight)+4:s.data.length),p=w(()=>s.virtualScroll?Math.max(0,Math.floor(_.value/s.rowHeight)-2):0),E=w(()=>s.virtualScroll?Math.min(p.value+z.value,s.data.length):s.data.length),I=w(()=>s.virtualScroll?s.data.slice(p.value,E.value):s.data),B=w(()=>s.data.length*s.rowHeight),R=(g,u)=>u.prop&&g[u.prop]||"",D=(g,u)=>{T("row-click",{row:g,index:u})},F=g=>{_.value=g.target.scrollTop},v=()=>{$.value&&(M.value=$.value.clientHeight)};return X(()=>s.data,()=>{ie(()=>{v()})},{deep:!0}),K(()=>{v(),window.addEventListener("resize",v)}),Q(()=>{window.removeEventListener("resize",v)}),(g,u)=>(n(),i("div",{class:"custom-table",style:k({height:r.height})},[r.showHeader?(n(),i("div",ye,[(n(!0),i(S,null,A(r.columns,a=>(n(),i("div",{key:a.prop||a.label,class:"table-cell header-cell",style:k({width:a.width,minWidth:a.width,flex:a.width?"none":"1",textAlign:a.align||"left"})},C(a.label),5))),128))])):q("",!0),f("div",{class:"table-body",ref_key:"tableBody",ref:$,onScroll:F},[r.virtualScroll?(n(),i("div",{key:0,class:"virtual-scroll-container",style:k({height:B.value+"px"})},[(n(!0),i(S,null,A(I.value,(a,d)=>(n(),i("div",{key:a.id||p.value+d,class:P(["table-row",{"row-hover":b.value===p.value+d}]),style:k({position:"absolute",top:(p.value+d)*r.rowHeight+"px",left:0,right:0}),onMouseenter:e=>b.value=p.value+d,onMouseleave:u[0]||(u[0]=e=>b.value=-1),onClick:e=>D(a,p.value+d)},[(n(!0),i(S,null,A(r.columns,e=>(n(),i("div",{key:e.prop||e.label,class:"table-cell body-cell",style:k({width:e.width,minWidth:e.width,flex:e.width?"none":"1",textAlign:e.align||"left"})},[O(g.$slots,`cell-${e.prop}`,{row:a,column:e,index:p.value+d},()=>[L(C(R(a,e)),1)],!0)],4))),128))],46,ke))),128))],4)):(n(),i("div",xe,[(n(!0),i(S,null,A(r.data,(a,d)=>(n(),i("div",{key:a.id||d,class:P(["table-row",{"row-hover":b.value===d}]),onMouseenter:e=>b.value=d,onMouseleave:u[1]||(u[1]=e=>b.value=-1),onClick:e=>D(a,d)},[(n(!0),i(S,null,A(r.columns,e=>(n(),i("div",{key:e.prop||e.label,class:"table-cell body-cell",style:k({width:e.width,minWidth:e.width,flex:e.width?"none":"1",textAlign:e.align||"left"})},[O(g.$slots,`cell-${e.prop}`,{row:a,column:e,index:d},()=>[L(C(R(a,e)),1)],!0)],4))),128))],42,Se))),128))]))],544),r.loading?(n(),i("div",Te,u[2]||(u[2]=[f("div",{class:"loading-spinner"},null,-1)]))):q("",!0)],4))}},Me=Y($e,[["__scopeId","data-v-ede69edf"]]),Be=Le(Me),He={class:"top-box"},Ae={class:"flex b-box"},Ve=["src"],Ie=["onClick"],Re=["onClick"],De=["onClick"],Ne={__name:"TradingList",setup(r){const{t:c}=re(),s=ce(),T=h(!1),$=h(!1),b=w(()=>[{id:0,name:c("transaction.tab1")},{id:1,name:c("transaction.tab2")}]),_=s.currentRoute.value.path==="/TradingList"?"spot":"futures",M=h(_==="spot"?G:J),z=ue({symbol_type:_}),p=h(0),E=l=>{p.value=l,M.value=l===0?_==="spot"?G:J:ge,T.value=!T.value},I=l=>{s.push({path:_==="spot"?"/SpotTrading":"/ContractTrading",query:{id:l.id}})},B=h(new Map),R=l=>{B.value.set(l.data.symbol,l.data)},{setSub:D,unsubscribeChannel:F}=ve();K(()=>{D("public:allticker",R)});function v(l,y){let N=B.value.get(l.symbol)||{};return l[y]=+N[y]||"-",+N[y]||"-"}const g=h(!1),u=l=>{g.value||(g.value=!0,me({symbol_id:l.id,symbol_type:_}).then(()=>{l.is_collection=!l.is_collection}).finally(()=>{g.value=!1}))},a=h([]),d=({setData:l})=>{a.value=l,H.value=l},e=h(""),H=h([]),Z=be(()=>{if(!e.value.trim()){H.value=a.value;return}H.value=a.value.filter(l=>l.name.toLowerCase().includes(e.value.toLowerCase()))},300),ee=()=>{Z()};X(e,()=>{Z()});const te=w(()=>[{prop:"index",label:"#",width:"80px"},{prop:"name",label:c("spotOpe.colum4.field1")},{prop:"price",label:c("tradingCommon.text21"),align:"right"},{prop:"price_change_percent",label:c("tradingCommon.text22"),align:"right"},{prop:"high_price_24h",label:c("tradingCommon.text23"),align:"right"},{prop:"low_price_24h",label:c("tradingCommon.text24"),align:"right"},{prop:"volume",label:c("tradingCommon.text25"),align:"right"},{prop:"action",label:c("otcHis.label1"),width:"100px"},{prop:"collection",label:"",width:"80px"}]),le=({row:l})=>{I(l)};return Q(()=>{B.value.clear(),F("public:allticker")}),(l,y)=>{const N=ne,W=_e,ae=pe,oe=se;return n(),i(S,null,[f("div",He,[x(N,{tabList:o(b),tabActive:o(p),onTabChange:E,class:"flex-shrink-0",isBlock:""},null,8,["tabList","tabActive"]),x(W,{modelValue:o(e),"onUpdate:modelValue":y[0]||(y[0]=t=>de(e)?e.value=t:null),class:"w-240 ml-auto",placeholder:o(c)("common.search")},null,8,["modelValue","placeholder"]),x(ae,{class:"ml-4 cursor-pointer",onClick:ee},{default:m(()=>[x(o(he))]),_:1})]),x(oe,{getTableUrl:o(M),tableRefresh:o($),tableParams:o(z),hasBtn:!1,tableSearch:o(T),pageSize:100,hidePage:"",isPage:o(p)===0,isNum:"",hasSearch:!1,onGetData:d},{table:m(({})=>[x(o(Be),{data:o(H),columns:o(te),loading:!o(H).length,"row-height":68,"virtual-scroll":!0,onRowClick:le},{"cell-index":m(({index:t})=>[L(C(t+1),1)]),"cell-name":m(({row:t})=>[f("div",Ae,[f("img",{src:o(Ce)(t.logo),class:"b-img",alt:""},null,8,Ve),L(" "+C(t.name),1)])]),"cell-price":m(({row:t})=>[f("div",{class:P([v(t,"price_latest_change")>=0?"c-num-status":"c-num-status is-red"])},C(o(V)(v(t,"price"))),3)]),"cell-price_change_percent":m(({row:t})=>[f("span",{class:P([v(t,"price_change_percent")>0?"c-num-status":"c-num-status is-red"])},C(o(V)(v(t,"price_change_percent")))+"% ",3)]),"cell-high_price_24h":m(({row:t})=>[L(C(o(V)(v(t,"high_price_24h"))),1)]),"cell-low_price_24h":m(({row:t})=>[L(C(o(V)(v(t,"low_price_24h"))),1)]),"cell-volume":m(({row:t})=>[L(C(o(V)(v(t,"volume"))),1)]),"cell-action":m(({row:t})=>[f("div",{class:"action-btn",onClick:U(j=>I(t),["stop"])},C(l.$t("newHome.th.title6")),9,Ie)]),"cell-collection":m(({row:t})=>[t.is_collection?(n(),i("img",{key:0,src:fe,class:"w-5 h-5 cursor-pointer",alt:"",onClick:U(j=>u(t),["stop"])},null,8,Re)):(n(),i("img",{key:1,src:we,class:"w-5 h-5 cursor-pointer",alt:"",onClick:U(j=>u(t),["stop"])},null,8,De))]),_:1},8,["data","columns","loading"])]),_:1},8,["getTableUrl","tableRefresh","tableParams","tableSearch","isPage"])],64)}}},Ke=Y(Ne,[["__scopeId","data-v-235920c5"]]);export{Ke as default};
